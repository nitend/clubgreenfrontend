{"ast":null,"code":"import _regeneratorRuntime from\"/Users/SvenL/Projekte/node_projects/clubgruen/frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/SvenL/Projekte/node_projects/clubgruen/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/SvenL/Projekte/node_projects/clubgruen/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from\"react\";import{useStripe,useElements,CardCvcElement,CardNumberElement,CardExpiryElement}from\"@stripe/react-stripe-js\";import{Button}from\"@material-ui/core\";import{ErrorMessage}from\"../../pages/pageframe/global/Messages/ErrorMessage\";import{CheckoutContext}from\"../../context/checkoutcontext/CheckoutContext\";import styles from\"./PaymentForm.module.css\";var style={base:{backgroundColor:'#ffffff',padding:10,fontSize:'22px',color:'#424770','::placeholder':{color:'#aab7c4'}},invalid:{color:'#9e2146'}};export var PaymentForm=function PaymentForm(props){var stripe=useStripe();var elements=useElements();var context=useContext(CheckoutContext);var _useState=useState(),_useState2=_slicedToArray(_useState,2),error=_useState2[0],seterror=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),success=_useState4[0],setsuccess=_useState4[1];var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var cardElement,_ref2,error,paymentMethod;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// Block native form submission.\nevent.preventDefault();if(!(!stripe||!elements)){_context.next=4;break;}seterror(new Error('Bazahldienst nicht erreichbar'));return _context.abrupt(\"return\");case 4:// Get a reference to a mounted CardElement. Elements knows how\n// to find your CardElement because there can only ever be one of\n// each type of element.\ncardElement=elements.getElement(CardNumberElement);// Use your card Element with other Stripe.js APIs\n_context.next=7;return stripe.createPaymentMethod({type:'card',card:cardElement?cardElement:{token:\"\"}});case 7:_ref2=_context.sent;error=_ref2.error;paymentMethod=_ref2.paymentMethod;if(error){console.log('[error]',error);seterror(error);}if(paymentMethod){context.setPaymentMethod(paymentMethod);props.onDone();}case 12:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return React.createElement(\"div\",{className:styles[\"payment-form\"]},React.createElement(\"form\",{onSubmit:handleSubmit},React.createElement(\"div\",{className:styles[\"payment-input-field\"]},React.createElement(CardNumberElement,{options:{style:style}})),React.createElement(\"div\",{className:styles[\"payment-input-line\"]},React.createElement(\"div\",{style:{flex:1},className:styles[\"payment-input-field\"]},React.createElement(CardExpiryElement,{options:{style:style}})),React.createElement(\"div\",{style:{flex:1},className:styles[\"payment-input-field\"]},React.createElement(CardCvcElement,{options:{style:style}}))),React.createElement(Button,{style:{float:\"right\"},color:\"primary\",variant:\"contained\",type:\"submit\",disabled:!stripe},\"\\xFCbernehmen\"),error?React.createElement(ErrorMessage,{error:error,show:error?true:false}):React.createElement(\"div\",null)));};","map":{"version":3,"sources":["/Users/SvenL/Projekte/node_projects/clubgruen/frontend/src/components/paymentformcard/PaymentForm.tsx"],"names":["React","useState","useContext","useStripe","useElements","CardCvcElement","CardNumberElement","CardExpiryElement","Button","ErrorMessage","CheckoutContext","styles","style","base","backgroundColor","padding","fontSize","color","invalid","PaymentForm","props","stripe","elements","context","error","seterror","success","setsuccess","handleSubmit","event","preventDefault","Error","cardElement","getElement","createPaymentMethod","type","card","token","paymentMethod","console","log","setPaymentMethod","onDone","flex","float"],"mappings":"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","sourcesContent":["\nimport React, { useState, useContext } from \"react\";\nimport { CardElement, useStripe, useElements, CardCvcElement, CardNumberElement, CardExpiryElement} from \"@stripe/react-stripe-js\";\nimport { Button } from \"@material-ui/core\";\nimport { ErrorMessage } from \"../../pages/pageframe/global/Messages/ErrorMessage\";\nimport { CheckoutContext } from \"../../context/checkoutcontext/CheckoutContext\";\nimport styles from \"./PaymentForm.module.css\"\nimport { CheckoutStepContext } from \"../../context/checkoutcontext/CheckoutStepContext\";\n\n\ninterface Props {\n   onDone: () => void  \n}\n\n\nconst style =  {\n    base: {\n      backgroundColor: '#ffffff',\n      padding: 10,\n      fontSize: '22px',\n      color: '#424770',\n      '::placeholder': {\n        color: '#aab7c4',\n      },\n    },\n    invalid: {\n      color: '#9e2146',\n    }\n}\n  \n\nexport const PaymentForm: React.FC<Props> = (props) => {\n\n    const stripe = useStripe();\n    const elements = useElements();\n    const context = useContext(CheckoutContext);\n\n    const [error, seterror] = useState()\n    const [success, setsuccess] = useState()\n\n\n    const handleSubmit = async (event: React.FormEvent) => {\n        // Block native form submission.\n        event.preventDefault();\n    \n        if (!stripe || !elements) {\n          seterror(new Error('Bazahldienst nicht erreichbar'));\n          return;\n        }\n    \n        // Get a reference to a mounted CardElement. Elements knows how\n        // to find your CardElement because there can only ever be one of\n        // each type of element.\n        const cardElement = elements.getElement(CardNumberElement);\n    \n        // Use your card Element with other Stripe.js APIs\n        const {error, paymentMethod} = await stripe.createPaymentMethod({\n          type: 'card',\n          card: cardElement ? cardElement : {token: \"\"},\n        });\n    \n        if (error) {\n          console.log('[error]', error);\n          seterror(error)\n        } \n        if(paymentMethod){\n          context.setPaymentMethod(paymentMethod);\n          props.onDone()\n        }        \n      };\n\n    return(\n      <div className={styles[\"payment-form\"]}>\n        <form onSubmit={handleSubmit} >\n\n\n            <div className={styles[\"payment-input-field\"]}>\n              <CardNumberElement options={{style}}/>\n            </div>\n            <div className={styles[\"payment-input-line\"]}>\n              <div style={{flex: 1}} className={styles[\"payment-input-field\"]}>\n                <CardExpiryElement options={{style}}/>\n              </div>\n              <div style={{flex: 1}} className={styles[\"payment-input-field\"]}>\n                <CardCvcElement options={{style}}/> \n              </div>\n            </div>\n            <Button style={{float: \"right\"}} color=\"primary\" variant=\"contained\" type=\"submit\" disabled={!stripe}>Ã¼bernehmen</Button>\n            {error ? <ErrorMessage error={error} show={error ? true : false}/> : <div></div>}\n        </form>\n        </div>\n\n    )\n\n\n}"]},"metadata":{},"sourceType":"module"}