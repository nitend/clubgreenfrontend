{"ast":null,"code":"var _jsxFileName = \"/Users/SvenL/Projekte/node_projects/clubgruen/frontend/src/pages/admin/properties/propertyeditor/PropertyEditor.tsx\";\nimport React, { useState } from 'react';\nimport { useSavePropertyMutation, useGetPropertyQuery } from '../../../../generated/graphql';\nimport { useParams } from 'react-router-dom';\nimport { Editor } from '../../form/Editor';\nimport { MessageView } from '../../../pageframe/global/Messages/MessageView';\nexport const newProperty = {\n  id: 0,\n  title: \"\",\n  subtext: \"\",\n  location: \"\",\n  lat: 0.0,\n  long: 0.0,\n  beds_adult: 0,\n  beds_kids: 0,\n  beds_tent: 0,\n  images: []\n};\nexport const PropertyEditor = props => {\n  const {\n    propertyId\n  } = useParams();\n  console.log(propertyId);\n  const [showMessage, setshowMessage] = useState(false);\n  const {\n    data,\n    loading,\n    error\n  } = useGetPropertyQuery({\n    variables: {\n      id: parseInt(propertyId ? propertyId : \"0\")\n    }\n  });\n  const [saveProperty] = useSavePropertyMutation();\n\n  if (loading) {\n    console.log('loading');\n  }\n\n  if (error) {\n    console.log(error);\n  }\n\n  var property = newProperty;\n\n  if (data && data.getProperty) {\n    property = data.getProperty;\n    return React.createElement(Editor, {\n      entity: property,\n      store: onSubmit,\n      entityId: property.id,\n      imageuploadurl: \"http://localhost:4000/upload/property/image\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, React.createElement(MessageView, {\n      severity: \"success\",\n      message: \"Die Daten wurden gespeichert\",\n      show: showMessage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }));\n  }\n\n  async function onSubmit(values) {\n    values.__typename = undefined;\n    values.lat = parseFloat(values.lat + \"\");\n    values.long = parseFloat(values.long + \"\");\n    values.beds_adult = parseFloat(values.beds_adult + \"\");\n    values.beds_kids = parseFloat(values.beds_kids + \"\");\n    values.beds_tent = parseFloat(values.beds_tent + \"\");\n    var result = await saveProperty({\n      variables: {\n        property: values\n      }\n    });\n\n    if (result) {\n      setshowMessage(true);\n    }\n  }\n\n  return React.createElement(Editor, {\n    entity: property,\n    store: onSubmit,\n    entityId: property.id,\n    imageuploadurl: \"http://localhost:4000/upload/property/image\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(MessageView, {\n    severity: \"success\",\n    message: \"Die Daten wurden gespeichert\",\n    show: showMessage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }));\n};","map":{"version":3,"sources":["/Users/SvenL/Projekte/node_projects/clubgruen/frontend/src/pages/admin/properties/propertyeditor/PropertyEditor.tsx"],"names":["React","useState","useSavePropertyMutation","useGetPropertyQuery","useParams","Editor","MessageView","newProperty","id","title","subtext","location","lat","long","beds_adult","beds_kids","beds_tent","images","PropertyEditor","props","propertyId","console","log","showMessage","setshowMessage","data","loading","error","variables","parseInt","saveProperty","property","getProperty","onSubmit","values","__typename","undefined","parseFloat","result"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAAmBC,uBAAnB,EAAgEC,mBAAhE,QAA2F,+BAA3F;AAEA,SAASC,SAAT,QAA0B,kBAA1B;AAIA,SAASC,MAAT,QAAuB,mBAAvB;AACA,SAASC,WAAT,QAA4B,gDAA5B;AAUA,OAAO,MAAMC,WAAqB,GAAG;AACjBC,EAAAA,EAAE,EAAE,CADa;AAEjBC,EAAAA,KAAK,EAAE,EAFU;AAGjBC,EAAAA,OAAO,EAAE,EAHQ;AAIjBC,EAAAA,QAAQ,EAAE,EAJO;AAKjBC,EAAAA,GAAG,EAAE,GALY;AAMjBC,EAAAA,IAAI,EAAE,GANW;AAOjBC,EAAAA,UAAU,EAAE,CAPK;AAQjBC,EAAAA,SAAS,EAAE,CARM;AASjBC,EAAAA,SAAS,EAAE,CATM;AAUjBC,EAAAA,MAAM,EAAE;AAVS,CAA9B;AAaP,OAAO,MAAMC,cAA+B,GAAIC,KAAD,IAAW;AAEtD,QAAM;AAAEC,IAAAA;AAAF,MAAiBhB,SAAS,EAAhC;AACAiB,EAAAA,OAAO,CAACC,GAAR,CAAYF,UAAZ;AAEA,QAAM,CAACG,WAAD,EAAcC,cAAd,IAAgCvB,QAAQ,CAAC,KAAD,CAA9C;AAEA,QAAM;AAACwB,IAAAA,IAAD;AAAOC,IAAAA,OAAP;AAAgBC,IAAAA;AAAhB,MAAyBxB,mBAAmB,CAAC;AAC/CyB,IAAAA,SAAS,EAAE;AACPpB,MAAAA,EAAE,EAAEqB,QAAQ,CAACT,UAAU,GAAGA,UAAH,GAAgB,GAA3B;AADL;AADoC,GAAD,CAAlD;AAKA,QAAM,CAACU,YAAD,IAAiB5B,uBAAuB,EAA9C;;AAEA,MAAGwB,OAAH,EAAW;AACPL,IAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACH;;AAED,MAAGK,KAAH,EAAS;AACLN,IAAAA,OAAO,CAACC,GAAR,CAAYK,KAAZ;AACH;;AAED,MAAII,QAAQ,GAAGxB,WAAf;;AACA,MAAGkB,IAAI,IAAIA,IAAI,CAACO,WAAhB,EAA6B;AACzBD,IAAAA,QAAQ,GAAGN,IAAI,CAACO,WAAhB;AACA,WACI,oBAAC,MAAD;AACI,MAAA,MAAM,EAAED,QADZ;AAEI,MAAA,KAAK,EAAEE,QAFX;AAGI,MAAA,QAAQ,EAAEF,QAAQ,CAACvB,EAHvB;AAII,MAAA,cAAc,EAAE,6CAJpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAKI,oBAAC,WAAD;AAAa,MAAA,QAAQ,EAAE,SAAvB;AAAkC,MAAA,OAAO,EAAE,8BAA3C;AAA2E,MAAA,IAAI,EAAEe,WAAjF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALJ,CADJ;AASH;;AAID,iBAAeU,QAAf,CAAwBC,MAAxB,EAA0C;AACtCA,IAAAA,MAAM,CAACC,UAAP,GAAoBC,SAApB;AACAF,IAAAA,MAAM,CAACtB,GAAP,GAAayB,UAAU,CAACH,MAAM,CAACtB,GAAP,GAAW,EAAZ,CAAvB;AACAsB,IAAAA,MAAM,CAACrB,IAAP,GAAcwB,UAAU,CAACH,MAAM,CAACrB,IAAP,GAAY,EAAb,CAAxB;AACAqB,IAAAA,MAAM,CAACpB,UAAP,GAAoBuB,UAAU,CAACH,MAAM,CAACpB,UAAP,GAAkB,EAAnB,CAA9B;AACAoB,IAAAA,MAAM,CAACnB,SAAP,GAAmBsB,UAAU,CAACH,MAAM,CAACnB,SAAP,GAAiB,EAAlB,CAA7B;AACAmB,IAAAA,MAAM,CAAClB,SAAP,GAAmBqB,UAAU,CAACH,MAAM,CAAClB,SAAP,GAAiB,EAAlB,CAA7B;AAEA,QAAIsB,MAAM,GAAG,MAAMR,YAAY,CAAC;AAC5BF,MAAAA,SAAS,EAAE;AACPG,QAAAA,QAAQ,EAAEG;AADH;AADiB,KAAD,CAA/B;;AAKA,QAAGI,MAAH,EAAU;AACNd,MAAAA,cAAc,CAAC,IAAD,CAAd;AACH;AACJ;;AAED,SACI,oBAAC,MAAD;AACI,IAAA,MAAM,EAAEO,QADZ;AAEI,IAAA,KAAK,EAAEE,QAFX;AAGI,IAAA,QAAQ,EAAEF,QAAQ,CAACvB,EAHvB;AAII,IAAA,cAAc,EAAE,6CAJpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAKI,oBAAC,WAAD;AAAa,IAAA,QAAQ,EAAE,SAAvB;AAAkC,IAAA,OAAO,EAAE,8BAA3C;AAA2E,IAAA,IAAI,EAAEe,WAAjF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALJ,CADJ;AAYH,CApEM","sourcesContent":["import React, { useState } from 'react'\nimport { Property, useSavePropertyMutation, usePropertiesQuery, useGetPropertyQuery } from '../../../../generated/graphql'\nimport { EditorForm } from '../../form/EditorForm';\nimport { useParams } from 'react-router-dom';\nimport { PictureUpload } from '../../imagehandler/PictureUpload';\nimport { Container } from '@material-ui/core';\nimport { ResponseMessage } from '../../../pageframe/global/Messages/ResponseMessage';\nimport { Editor } from '../../form/Editor';\nimport { MessageView } from '../../../pageframe/global/Messages/MessageView';\n\n\ninterface Props {\n    \n}\n\n\n\n\nexport const newProperty: Property = { \n                    id: 0,\n                    title: \"\",\n                    subtext: \"\",\n                    location: \"\",\n                    lat: 0.0,\n                    long: 0.0,\n                    beds_adult: 0,\n                    beds_kids: 0,\n                    beds_tent: 0,\n                    images: [],   \n                }\n\nexport const PropertyEditor: React.FC<Props> = (props) => {\n\n    const { propertyId } = useParams()\n    console.log(propertyId);\n\n    const [showMessage, setshowMessage] = useState(false);\n\n    const {data, loading, error} = useGetPropertyQuery({\n        variables: {\n            id: parseInt(propertyId ? propertyId : \"0\")\n        }\n    });\n    const [saveProperty] = useSavePropertyMutation();\n\n    if(loading){\n        console.log('loading') \n    }\n\n    if(error){\n        console.log(error) \n    }\n\n    var property = newProperty;\n    if(data && data.getProperty) {\n        property = data.getProperty\n        return(\n            <Editor \n                entity={property} \n                store={onSubmit} \n                entityId={property.id}\n                imageuploadurl={\"http://localhost:4000/upload/property/image\"}>     \n                <MessageView severity={\"success\"} message={\"Die Daten wurden gespeichert\"} show={showMessage} />\n            </Editor>\n        )   \n    }\n\n    \n\n    async function onSubmit(values: Property) {\n        values.__typename = undefined;\n        values.lat = parseFloat(values.lat+\"\");\n        values.long = parseFloat(values.long+\"\");\n        values.beds_adult = parseFloat(values.beds_adult+\"\");\n        values.beds_kids = parseFloat(values.beds_kids+\"\");\n        values.beds_tent = parseFloat(values.beds_tent+\"\");\n  \n        var result = await saveProperty({\n            variables: {\n                property: values\n            }\n        });\n        if(result){\n            setshowMessage(true)\n        }\n    }\n\n    return(\n        <Editor \n            entity={property} \n            store={onSubmit} \n            entityId={property.id}\n            imageuploadurl={\"http://localhost:4000/upload/property/image\"}>     \n            <MessageView severity={\"success\"} message={\"Die Daten wurden gespeichert\"} show={showMessage} />\n        </Editor>\n    )\n\n\n\n}"]},"metadata":{},"sourceType":"module"}