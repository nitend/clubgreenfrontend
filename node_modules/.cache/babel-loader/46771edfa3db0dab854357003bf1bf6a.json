{"ast":null,"code":"var _jsxFileName = \"/Users/SvenL/Projekte/node_projects/clubgruen/frontend/src/pages/booking/BookingRouter.tsx\";\nimport React, { useState } from 'react';\nimport { useMyBookingQuery, useCreateMyBookingMutation } from '../../generated/graphql';\nimport { MyBooking } from './MyBooking';\nimport { PropertyList } from './PropertyList';\nexport const BookingRouter = () => {\n  var arrival = new Date(Date.now());\n  var departure = new Date(Date.now());\n  var bookActiv = false;\n  var selectProp = null;\n  const {\n    data,\n    loading,\n    error\n  } = useMyBookingQuery();\n\n  if (data && (data === null || data === void 0 ? void 0 : data.myBooking)) {\n    bookActiv = true;\n    arrival = new Date(data.myBooking.from);\n    departure = new Date(data.myBooking.to);\n\n    if (data.myBooking.property) {\n      selectProp = data.myBooking.property;\n    }\n  }\n\n  if (bookActiv) {\n    console.log(\"Booking stored\");\n  }\n\n  const [selectedProp, setSelectedProp] = useState(selectProp);\n  const [bookingActive, setBookingActive] = useState(bookActiv);\n  const [arrivalDate, setArrivalDate] = useState(arrival);\n  const [departureDate, setDepartureDate] = useState(departure);\n  const [booking] = useCreateMyBookingMutation();\n\n  const bookPropListener = (from, to) => {\n    if (from && to) {\n      let fromTime = from.getTime();\n      let toTime = to.getTime();\n      setArrivalDate(from);\n      setDepartureDate(to);\n      book(toTime, fromTime);\n    } else {\n      console.log(\"No Date selected\");\n    }\n  };\n\n  const cancleBookingListener = () => {\n    setBookingActive(false);\n    console.log(\"booking canceled\");\n  };\n\n  async function book(to, from) {\n    if (selectedProp) {\n      const response = await booking({\n        variables: {\n          from: from,\n          to: to,\n          propertyId: selectedProp.id\n        }\n      });\n      console.log(response);\n    }\n  }\n\n  const selectPropListener = property => {\n    setSelectedProp(property);\n  };\n\n  if (loading) {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, \"loading ....\");\n  }\n\n  if (error) {\n    console.log(error);\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, \"err\");\n  }\n\n  if (!data) {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \"no data\");\n  }\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, React.createElement(MyBooking, {\n    bookingListener: bookPropListener,\n    cancleListener: cancleBookingListener,\n    arrivalDate: arrivalDate,\n    departureDate: departureDate,\n    property: selectedProp,\n    booking: bookingActive,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }), React.createElement(PropertyList, {\n    selectPropListener: selectPropListener,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }));\n};","map":{"version":3,"sources":["/Users/SvenL/Projekte/node_projects/clubgruen/frontend/src/pages/booking/BookingRouter.tsx"],"names":["React","useState","useMyBookingQuery","useCreateMyBookingMutation","MyBooking","PropertyList","BookingRouter","arrival","Date","now","departure","bookActiv","selectProp","data","loading","error","myBooking","from","to","property","console","log","selectedProp","setSelectedProp","bookingActive","setBookingActive","arrivalDate","setArrivalDate","departureDate","setDepartureDate","booking","bookPropListener","fromTime","getTime","toTime","book","cancleBookingListener","response","variables","propertyId","id","selectPropListener"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { useMyBookingQuery, useCreateMyBookingMutation } from '../../generated/graphql'\nimport { MyBooking } from './MyBooking';\nimport { PropertyList } from './PropertyList';\n\ninterface Props {\n    \n}\n\n\nexport const BookingRouter:  React.FC<Props> = () => {\n\n    var arrival = new Date(Date.now());\n    var departure = new Date(Date.now());\n    var bookActiv = false;\n    var selectProp = null;\n\n    const {data, loading, error} = useMyBookingQuery();\n\n    if(data && data?.myBooking){\n        bookActiv = true;\n        arrival = new Date(data.myBooking.from); \n        departure = new Date(data.myBooking.to); \n        if(data.myBooking.property){\n            selectProp = data.myBooking.property;\n        }\n    }\n\n    if(bookActiv){\n        console.log(\"Booking stored\")\n    }\n\n    const [selectedProp, setSelectedProp] = useState(selectProp)\n    const [bookingActive, setBookingActive] = useState(bookActiv)\n    const [arrivalDate, setArrivalDate] = useState(arrival) \n    const [departureDate, setDepartureDate] = useState(departure)\n    \n    const [booking] = useCreateMyBookingMutation();\n\n    const bookPropListener = (from: Date, to: Date) =>{\n        if(from && to){\n            let fromTime = from.getTime();\n            let toTime = to.getTime()\n            setArrivalDate(from);\n            setDepartureDate(to);\n            book(toTime, fromTime);\n        } else {\n            console.log(\"No Date selected\")\n        }\n\n    }\n    \n    const cancleBookingListener = () =>{\n        setBookingActive(false)\n        console.log(\"booking canceled\")\n    }\n\n    async function book(to: number, from: number) {\n        if(selectedProp){\n            const response = await booking({\n                variables: {\n                    from: from,\n                    to: to,\n                    propertyId: selectedProp.id\n                }\n            })\n            console.log(response)\n        }\n    }\n\n    const selectPropListener = (property: any) =>{\n        setSelectedProp(property);\n    }\n\n\n    if(loading){\n        return <div>\n            loading ....\n        </div>\n    }\n\n    if(error){\n        console.log(error)\n        return <div>err</div>\n    }\n\n    if(!data){\n        return <div>\n            no data\n        </div>\n    }\n\n\n    \n    return (\n        <div>\n            <MyBooking \n                bookingListener={bookPropListener} \n                cancleListener={cancleBookingListener}\n                arrivalDate={arrivalDate} \n                departureDate={departureDate} \n                property={selectedProp}\n                booking={bookingActive}></MyBooking>\n            <PropertyList selectPropListener={selectPropListener}></PropertyList>\n        </div>\n    )\n    \n}\n"]},"metadata":{},"sourceType":"module"}