{"ast":null,"code":"var _jsxFileName = \"/Users/SvenL/Projekte/node_projects/clubgruen/frontend/src/pages/pageframe/header/UserMenu.tsx\";\nimport React from 'react';\nimport { Avatar, Menu, MenuItem } from '@material-ui/core';\nimport Person from '@material-ui/icons/Person';\nimport { useHistory } from 'react-router-dom';\nimport { useLogoutMutation } from '../../../generated/graphql';\nimport { setAccessToken } from '../../../accessToken';\nexport default function UserMenu() {\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const [logout, {\n    client\n  }] = useLogoutMutation();\n  let history = useHistory();\n\n  const handleLogoutClicked = async () => {\n    setAccessToken(\"\");\n    client.clearStore().then(() => client.resetStore()).then(() => logout()).then(() => history.push(\"/\"));\n    handleClose();\n  };\n\n  const open = Boolean(anchorEl);\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleMenu = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, React.createElement(Avatar, {\n    \"aria-label\": \"account of current user\",\n    \"aria-controls\": \"menu-appbar\",\n    \"aria-haspopup\": \"true\",\n    onClick: handleMenu,\n    style: {\n      color: \"white\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, React.createElement(Person, {\n    color: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  })), React.createElement(Menu, {\n    id: \"menu-appbar\",\n    anchorEl: anchorEl,\n    anchorOrigin: {\n      vertical: 'top',\n      horizontal: 'right'\n    },\n    keepMounted: true,\n    transformOrigin: {\n      vertical: 'top',\n      horizontal: 'right'\n    },\n    open: open,\n    onClose: handleClose,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, React.createElement(MenuItem, {\n    onClick: handleLogoutClicked,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, \"Logout\"), React.createElement(MenuItem, {\n    onClick: handleClose,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, \"My account\")));\n}","map":{"version":3,"sources":["/Users/SvenL/Projekte/node_projects/clubgruen/frontend/src/pages/pageframe/header/UserMenu.tsx"],"names":["React","Avatar","Menu","MenuItem","Person","useHistory","useLogoutMutation","setAccessToken","UserMenu","anchorEl","setAnchorEl","useState","logout","client","history","handleLogoutClicked","clearStore","then","resetStore","push","handleClose","open","Boolean","handleMenu","event","currentTarget","color","vertical","horizontal"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,MAAT,EAAiBC,IAAjB,EAAuBC,QAAvB,QAAuC,mBAAvC;AACA,OAAOC,MAAP,MAAmB,2BAAnB;AACA,SAAQC,UAAR,QAAyB,kBAAzB;AACA,SAAqBC,iBAArB,QAA8C,4BAA9C;AACA,SAASC,cAAT,QAA+B,sBAA/B;AAIA,eAAe,SAASC,QAAT,GAAoB;AAE/B,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BV,KAAK,CAACW,QAAN,CAAe,IAAf,CAAhC;AACA,QAAM,CAACC,MAAD,EAAS;AAACC,IAAAA;AAAD,GAAT,IAAqBP,iBAAiB,EAA5C;AAGA,MAAIQ,OAAO,GAAGT,UAAU,EAAxB;;AAEA,QAAMU,mBAAmB,GAAG,YAAY;AACpCR,IAAAA,cAAc,CAAC,EAAD,CAAd;AACAM,IAAAA,MAAM,CAAEG,UAAR,GACKC,IADL,CACU,MAAMJ,MAAM,CAAEK,UAAR,EADhB,EAEKD,IAFL,CAEU,MAAML,MAAM,EAFtB,EAGKK,IAHL,CAGU,MAAMH,OAAO,CAACK,IAAR,CAAa,GAAb,CAHhB;AAIAC,IAAAA,WAAW;AACd,GAPD;;AASA,QAAMC,IAAI,GAAGC,OAAO,CAACb,QAAD,CAApB;;AAEA,QAAMW,WAAW,GAAG,MAAM;AACxBV,IAAAA,WAAW,CAAC,IAAD,CAAX;AACD,GAFD;;AAIA,QAAMa,UAAU,GAAIC,KAAD,IAAgB;AACnCd,IAAAA,WAAW,CAACc,KAAK,CAACC,aAAP,CAAX;AACC,GAFD;;AAMA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,MAAD;AAAQ,kBAAW,yBAAnB;AACE,qBAAc,aADhB;AAEE,qBAAc,MAFhB;AAGE,IAAA,OAAO,EAAEF,UAHX;AAIE,IAAA,KAAK,EAAE;AAACG,MAAAA,KAAK,EAAE;AAAR,KAJT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAKM,oBAAC,MAAD;AAAQ,IAAA,KAAK,EAAC,SAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALN,CADJ,EAQQ,oBAAC,IAAD;AACE,IAAA,EAAE,EAAC,aADL;AAEE,IAAA,QAAQ,EAAEjB,QAFZ;AAGE,IAAA,YAAY,EAAE;AACZkB,MAAAA,QAAQ,EAAE,KADE;AAEZC,MAAAA,UAAU,EAAE;AAFA,KAHhB;AAOE,IAAA,WAAW,MAPb;AAQE,IAAA,eAAe,EAAE;AACfD,MAAAA,QAAQ,EAAE,KADK;AAEfC,MAAAA,UAAU,EAAE;AAFG,KARnB;AAYE,IAAA,IAAI,EAAEP,IAZR;AAaE,IAAA,OAAO,EAAED,WAbX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAeE,oBAAC,QAAD;AAAU,IAAA,OAAO,EAAEL,mBAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAfF,EAgBE,oBAAC,QAAD;AAAU,IAAA,OAAO,EAAEK,WAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAhBF,CARR,CADJ;AA8BH","sourcesContent":["import React from 'react'\nimport { Avatar, Menu, MenuItem } from '@material-ui/core';\nimport Person from '@material-ui/icons/Person'\nimport {useHistory} from 'react-router-dom'\nimport { useMeQuery, useLogoutMutation } from '../../../generated/graphql'\nimport { setAccessToken } from '../../../accessToken'\n\n\n\nexport default function UserMenu() {\n\n    const [anchorEl, setAnchorEl] = React.useState(null);\n    const [logout, {client}] = useLogoutMutation();\n    \n\n    let history = useHistory();\n\n    const handleLogoutClicked = async () => {\n        setAccessToken(\"\");   \n        client!.clearStore()\n            .then(() => client!.resetStore())         \n            .then(() => logout())\n            .then(() => history.push(\"/\"));\n        handleClose(); \n    };\n\n    const open = Boolean(anchorEl);\n\n    const handleClose = () => {\n      setAnchorEl(null);\n    };\n  \n    const handleMenu = (event :any) => {\n    setAnchorEl(event.currentTarget);\n    };\n\n\n\n    return (\n        <div>\n            <Avatar aria-label=\"account of current user\"\n              aria-controls=\"menu-appbar\"\n              aria-haspopup=\"true\"\n              onClick={handleMenu}\n              style={{color: \"white\"}}>\n                  <Person color=\"primary\"></Person>\n                </Avatar>\n                <Menu\n                  id=\"menu-appbar\"\n                  anchorEl={anchorEl}\n                  anchorOrigin={{\n                    vertical: 'top',\n                    horizontal: 'right',\n                  }}\n                  keepMounted\n                  transformOrigin={{\n                    vertical: 'top',\n                    horizontal: 'right',\n                  }}\n                  open={open}\n                  onClose={handleClose}\n                >\n                  <MenuItem onClick={handleLogoutClicked}>Logout</MenuItem>\n                  <MenuItem onClick={handleClose}>My account</MenuItem>\n                </Menu>\n                \n                </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}