{"ast":null,"code":"import _regeneratorRuntime from\"/Users/SvenL/Projekte/node_projects/clubgruen/frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/SvenL/Projekte/node_projects/clubgruen/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/SvenL/Projekte/node_projects/clubgruen/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{Avatar,Menu,MenuItem}from'@material-ui/core';import Person from'@material-ui/icons/Person';import{useHistory}from'react-router-dom';import{useLogoutMutation}from'../../../generated/graphql';import{setAccessToken}from'../../../accessToken';export var UserMenu=function UserMenu(props){var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),anchorEl=_React$useState2[0],setAnchorEl=_React$useState2[1];var _useLogoutMutation=useLogoutMutation(),_useLogoutMutation2=_slicedToArray(_useLogoutMutation,2),logout=_useLogoutMutation2[0],client=_useLogoutMutation2[1].client;var history=useHistory();var handleLogoutClicked=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:history.push(\"/\");setAccessToken(\"\");client.clearStore().then(function(){return logout();}).then(props.loggedOut());handleClose();case 4:case\"end\":return _context.stop();}}},_callee);}));return function handleLogoutClicked(){return _ref.apply(this,arguments);};}();var open=Boolean(anchorEl);var handleClose=function handleClose(){setAnchorEl(null);};var handleMenu=function handleMenu(event){setAnchorEl(event.currentTarget);};return React.createElement(\"div\",null,React.createElement(Avatar,{\"aria-label\":\"account of current user\",\"aria-controls\":\"menu-appbar\",\"aria-haspopup\":\"true\",onClick:handleMenu,style:{backgroundColor:\"#ffffff\"}},React.createElement(Person,{color:\"primary\"})),React.createElement(Menu,{id:\"menu-appbar\",anchorEl:anchorEl,anchorOrigin:{vertical:'top',horizontal:'right'},keepMounted:true,transformOrigin:{vertical:'top',horizontal:'right'},open:open,onClose:handleClose},React.createElement(MenuItem,{onClick:handleLogoutClicked},\"Logout\"),React.createElement(MenuItem,{onClick:handleClose},\"My account\")));};","map":{"version":3,"sources":["/Users/SvenL/Projekte/node_projects/clubgruen/frontend/src/pages/pageframe/header/UserMenu.tsx"],"names":["React","Avatar","Menu","MenuItem","Person","useHistory","useLogoutMutation","setAccessToken","UserMenu","props","useState","anchorEl","setAnchorEl","logout","client","history","handleLogoutClicked","push","clearStore","then","loggedOut","handleClose","open","Boolean","handleMenu","event","currentTarget","backgroundColor","vertical","horizontal"],"mappings":"wZAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,MAAT,CAAiBC,IAAjB,CAAuBC,QAAvB,KAAuC,mBAAvC,CACA,MAAOC,CAAAA,MAAP,KAAmB,2BAAnB,CACA,OAAQC,UAAR,KAAyB,kBAAzB,CACA,OAASC,iBAAT,KAAkC,4BAAlC,CACA,OAASC,cAAT,KAA+B,sBAA/B,CAOA,MAAO,IAAMC,CAAAA,QAAyB,CAAG,QAA5BA,CAAAA,QAA4B,CAACC,KAAD,CAAW,qBAEhBT,KAAK,CAACU,QAAN,CAAe,IAAf,CAFgB,oDAEzCC,QAFyC,qBAE/BC,WAF+B,4CAGrBN,iBAAiB,EAHI,0DAGzCO,MAHyC,wBAGhCC,MAHgC,wBAGhCA,MAHgC,CAMhD,GAAIC,CAAAA,OAAO,CAAGV,UAAU,EAAxB,CAEA,GAAMW,CAAAA,mBAAmB,0FAAG,mIACxBD,OAAO,CAACE,IAAR,CAAa,GAAb,EACAV,cAAc,CAAC,EAAD,CAAd,CACAO,MAAM,CAAEI,UAAR,GACKC,IADL,CACU,iBAAMN,CAAAA,MAAM,EAAZ,EADV,EAC0BM,IAD1B,CAC+BV,KAAK,CAACW,SAAN,EAD/B,EAEAC,WAAW,GALa,sDAAH,kBAAnBL,CAAAA,mBAAmB,0CAAzB,CAQA,GAAMM,CAAAA,IAAI,CAAGC,OAAO,CAACZ,QAAD,CAApB,CAEA,GAAMU,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACxBT,WAAW,CAAC,IAAD,CAAX,CACD,CAFD,CAIA,GAAMY,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,KAAD,CAAgB,CACnCb,WAAW,CAACa,KAAK,CAACC,aAAP,CAAX,CACC,CAFD,CAIA,MACI,gCACI,oBAAC,MAAD,EAAQ,aAAW,yBAAnB,CACE,gBAAc,aADhB,CAEE,gBAAc,MAFhB,CAGE,OAAO,CAAEF,UAHX,CAIE,KAAK,CAAE,CAACG,eAAe,CAAE,SAAlB,CAJT,EAKM,oBAAC,MAAD,EAAQ,KAAK,CAAC,SAAd,EALN,CADJ,CAQQ,oBAAC,IAAD,EACE,EAAE,CAAC,aADL,CAEE,QAAQ,CAAEhB,QAFZ,CAGE,YAAY,CAAE,CACZiB,QAAQ,CAAE,KADE,CAEZC,UAAU,CAAE,OAFA,CAHhB,CAOE,WAAW,KAPb,CAQE,eAAe,CAAE,CACfD,QAAQ,CAAE,KADK,CAEfC,UAAU,CAAE,OAFG,CARnB,CAYE,IAAI,CAAEP,IAZR,CAaE,OAAO,CAAED,WAbX,EAeE,oBAAC,QAAD,EAAU,OAAO,CAAEL,mBAAnB,WAfF,CAgBE,oBAAC,QAAD,EAAU,OAAO,CAAEK,WAAnB,eAhBF,CARR,CADJ,CA6BH,CAvDM","sourcesContent":["import React from 'react'\nimport { Avatar, Menu, MenuItem } from '@material-ui/core';\nimport Person from '@material-ui/icons/Person'\nimport {useHistory} from 'react-router-dom'\nimport { useLogoutMutation } from '../../../generated/graphql'\nimport { setAccessToken } from '../../../accessToken'\n\ninterface Props {\n    loggedOut: any\n}\n\n\nexport const UserMenu: React.FC<Props> = (props) => {\n\n    const [anchorEl, setAnchorEl] = React.useState(null);\n    const [logout, {client}] = useLogoutMutation();\n    \n\n    let history = useHistory();\n\n    const handleLogoutClicked = async () => {\n        history.push(\"/\") \n        setAccessToken(\"\");\n        client!.clearStore()        \n            .then(() => logout()).then(props.loggedOut())\n        handleClose(); \n    };\n\n    const open = Boolean(anchorEl);\n\n    const handleClose = () => {\n      setAnchorEl(null);\n    };\n  \n    const handleMenu = (event :any) => {\n    setAnchorEl(event.currentTarget);\n    };\n\n    return (\n        <div>\n            <Avatar aria-label=\"account of current user\"\n              aria-controls=\"menu-appbar\"\n              aria-haspopup=\"true\"\n              onClick={handleMenu}\n              style={{backgroundColor: \"#ffffff\"}}>\n                  <Person color=\"primary\"></Person>\n                </Avatar>\n                <Menu\n                  id=\"menu-appbar\"\n                  anchorEl={anchorEl}\n                  anchorOrigin={{\n                    vertical: 'top',\n                    horizontal: 'right',\n                  }}\n                  keepMounted\n                  transformOrigin={{\n                    vertical: 'top',\n                    horizontal: 'right',\n                  }}\n                  open={open}\n                  onClose={handleClose}\n                >\n                  <MenuItem onClick={handleLogoutClicked}>Logout</MenuItem>\n                  <MenuItem onClick={handleClose}>My account</MenuItem>\n                </Menu>    \n            </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}