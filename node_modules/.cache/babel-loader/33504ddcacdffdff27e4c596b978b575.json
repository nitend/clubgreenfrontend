{"ast":null,"code":"var _jsxFileName = \"/Users/SvenL/Projekte/node_projects/clubgruen/frontend/src/container/addresseditor/index.tsx\";\nimport React, { useState } from \"react\";\nimport { AddressForm } from \"../../components/addressform\";\nimport { useMeQuery, useUpdateUserAddressMutation } from \"../../generated/graphql\";\nimport { ErrorMessage } from \"../../pages/pageframe/global/Messages/ErrorMessage\";\nimport { LoadingAnimation } from \"../../pages/pageframe/global/Messages/LoadingAnimation\";\nimport { SuccessMessage } from \"../../pages/pageframe/global/Messages/SucessMessage\";\nexport const AddressEditor = props => {\n  const {\n    data,\n    loading,\n    error\n  } = useMeQuery();\n  const [useraddress] = useUpdateUserAddressMutation();\n  const [addressUpdated, setaddressUpdated] = useState(false);\n\n  if (error) {\n    return React.createElement(ErrorMessage, {\n      error: error,\n      show: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 20\n      },\n      __self: this\n    });\n  }\n\n  const handleSaveAddress = async address => {\n    console.log(\"onSubmit :\" + JSON.stringify(address));\n    const result = await useraddress({\n      variables: {\n        useraddress: address\n      }\n    });\n\n    if (result) {\n      setaddressUpdated(true);\n      props.onDone();\n    } else {\n      console.log(\"onSubmit : false\");\n    }\n  };\n\n  if (data && data.me) {\n    const user = data.me;\n    const address = {\n      streetName: user.street ? user.street : \"\",\n      streetNumber: user.streetNumber ? user.streetNumber : \"\",\n      postalCode: user.postalcode ? user.postalcode : \"\",\n      town: user.town ? user.town : \"\"\n    };\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, React.createElement(AddressForm, {\n      values: address,\n      onSubmit: handleSaveAddress,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }), React.createElement(SuccessMessage, {\n      response: \"Neue Adresse wurden gespeichert.\",\n      show: addressUpdated,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }));\n  }\n\n  return React.createElement(LoadingAnimation, {\n    message: \"Daten werden geladen\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  });\n};","map":{"version":3,"sources":["/Users/SvenL/Projekte/node_projects/clubgruen/frontend/src/container/addresseditor/index.tsx"],"names":["React","useState","AddressForm","useMeQuery","useUpdateUserAddressMutation","ErrorMessage","LoadingAnimation","SuccessMessage","AddressEditor","props","data","loading","error","useraddress","addressUpdated","setaddressUpdated","handleSaveAddress","address","console","log","JSON","stringify","result","variables","onDone","me","user","streetName","street","streetNumber","postalCode","postalcode","town"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAAkBC,WAAlB,QAAqC,8BAArC;AACA,SAASC,UAAT,EAAqBC,4BAArB,QAAyD,yBAAzD;AACA,SAASC,YAAT,QAA6B,oDAA7B;AACA,SAASC,gBAAT,QAAiC,wDAAjC;AACA,SAASC,cAAT,QAA+B,qDAA/B;AAMA,OAAO,MAAMC,aAA8B,GAAIC,KAAD,IAAW;AAErD,QAAM;AAACC,IAAAA,IAAD;AAAOC,IAAAA,OAAP;AAAgBC,IAAAA;AAAhB,MAAyBT,UAAU,EAAzC;AACA,QAAM,CAACU,WAAD,IAAgBT,4BAA4B,EAAlD;AAEA,QAAM,CAACU,cAAD,EAAiBC,iBAAjB,IAAsCd,QAAQ,CAAC,KAAD,CAApD;;AAEA,MAAGW,KAAH,EAAS;AACL,WAAQ,oBAAC,YAAD;AAAc,MAAA,KAAK,EAAEA,KAArB;AAA4B,MAAA,IAAI,EAAE,IAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAR;AACH;;AAED,QAAMI,iBAAiB,GAAG,MAAOC,OAAP,IAA4B;AAElDC,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAcC,IAAI,CAACC,SAAL,CAAeJ,OAAf,CAA1B;AACD,UAAMK,MAAM,GAAG,MAAMT,WAAW,CAAC;AAC5BU,MAAAA,SAAS,EAAE;AACPV,QAAAA,WAAW,EAAEI;AADN;AADiB,KAAD,CAAhC;;AAKC,QAAGK,MAAH,EAAU;AACNP,MAAAA,iBAAiB,CAAC,IAAD,CAAjB;AACAN,MAAAA,KAAK,CAACe,MAAN;AACH,KAHD,MAGO;AACHN,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACH;AACJ,GAdD;;AAgBA,MAAGT,IAAI,IAAIA,IAAI,CAACe,EAAhB,EAAmB;AACf,UAAMC,IAAI,GAAGhB,IAAI,CAACe,EAAlB;AAEA,UAAMR,OAAgB,GAAG;AACrBU,MAAAA,UAAU,EAAED,IAAI,CAACE,MAAL,GAAcF,IAAI,CAACE,MAAnB,GAA4B,EADnB;AAErBC,MAAAA,YAAY,EAAEH,IAAI,CAACG,YAAL,GAAoBH,IAAI,CAACG,YAAzB,GAAwC,EAFjC;AAGrBC,MAAAA,UAAU,EAAEJ,IAAI,CAACK,UAAL,GAAkBL,IAAI,CAACK,UAAvB,GAAoC,EAH3B;AAIrBC,MAAAA,IAAI,EAAEN,IAAI,CAACM,IAAL,GAAYN,IAAI,CAACM,IAAjB,GAAwB;AAJT,KAAzB;AAQA,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,WAAD;AAAa,MAAA,MAAM,EAAEf,OAArB;AAA8B,MAAA,QAAQ,EAAED,iBAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAEI,oBAAC,cAAD;AAAgB,MAAA,QAAQ,EAAE,kCAA1B;AAA8D,MAAA,IAAI,EAAEF,cAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CADJ;AAMH;;AACD,SACI,oBAAC,gBAAD;AAAkB,IAAA,OAAO,EAAE,sBAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ;AAGH,CAhDM","sourcesContent":["import React, { useState } from \"react\";\nimport { Address, AddressForm } from \"../../components/addressform\";\nimport { useMeQuery, useUpdateUserAddressMutation } from \"../../generated/graphql\";\nimport { ErrorMessage } from \"../../pages/pageframe/global/Messages/ErrorMessage\";\nimport { LoadingAnimation } from \"../../pages/pageframe/global/Messages/LoadingAnimation\";\nimport { SuccessMessage } from \"../../pages/pageframe/global/Messages/SucessMessage\";\n\ninterface Props {\n    onDone: () => void\n}\n\nexport const AddressEditor: React.FC<Props> = (props) => {\n\n    const {data, loading, error} = useMeQuery();\n    const [useraddress] = useUpdateUserAddressMutation();\n\n    const [addressUpdated, setaddressUpdated] = useState(false)\n\n    if(error){\n        return (<ErrorMessage error={error} show={true}/>)\n    }\n\n    const handleSaveAddress = async (address: Address) => {\n\n        console.log(\"onSubmit :\"+ JSON.stringify(address))\n       const result = await useraddress({\n            variables: {\n                useraddress: address\n            }\n        })\n        if(result){\n            setaddressUpdated(true)\n            props.onDone() \n        } else {\n            console.log(\"onSubmit : false\")\n        }\n    }\n\n    if(data && data.me){\n        const user = data.me;\n\n        const address: Address = {\n            streetName: user.street ? user.street : \"\",\n            streetNumber: user.streetNumber ? user.streetNumber : \"\",\n            postalCode: user.postalcode ? user.postalcode : \"\",\n            town: user.town ? user.town : \"\" \n        }\n\n\n        return (\n            <div>\n                <AddressForm values={address} onSubmit={handleSaveAddress}/>\n                <SuccessMessage response={\"Neue Adresse wurden gespeichert.\"} show={addressUpdated} /> \n            </div>\n        )\n    }\n    return (\n        <LoadingAnimation message={\"Daten werden geladen\"} />\n    )\n}\n"]},"metadata":{},"sourceType":"module"}